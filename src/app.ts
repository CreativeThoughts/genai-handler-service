import express, { Express, Request, Response } from "express"; import cors from "cors"; import { router as genaiRouter } from "./routes/genai.routes"; import { requestLogger } from "./middleware/requestLogger"; import { errorHandler } from "./middleware/errorHandler"; export const createApp = (): Express => { const app = express(); // Middleware app.use(cors()); app.use(express.json()); app.use(requestLogger); // Routes app.use("/api/genai", genaiRouter); app.get("/health", (req: Request, res: Response) => { res.json({ status: "OK", timestamp: new Date().toISOString() }); }); // Error handler (must be last) app.use(errorHandler); return app; };
